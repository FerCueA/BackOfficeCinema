<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EL RINCÓN DEL CINE - Gestión</title>
    <link th:href="@{/styles/home.css}" rel="stylesheet" id="bootstrap-css" />
    <link
      th:href="@{/bootstrap/4.3.1/css/bootstrap.min.css}"
      rel="stylesheet"
      id="bootstrap-css"
    />
    <script th:src="@{/js/jquery-3.6.1.min.js}"></script>
    <script th:src="@{/bootstrap/4.3.1/js/bootstrap.bundle.min.js}"></script>

    <script th:src="@{/js/home.js}"></script>
  </head>
  <body>
    <!-- La maquetación base de esta página ha sido obtenida desde: https://bootstrapious.com/p/bootstrap-vertical-navbar-->
    <!-- Vertical navbar -->

    <!--MENU DATOS PERFIL USUARIO  -->
    <div class="vertical-nav bg-white" id="sidebar">
      <div class="py-4 px-3 mb-4 bg-light">
        <div class="media d-flex align-items-center">
          <img
            th:src="@{/img/usuario.gif}"
            alt="..."
            width="65"
            class="mr-3 rounded-circle img-thumbnail shadow-sm"
          />
          <div class="media-body">
            <h4
              class="m-0"
              th:text="${nombre + ' ' + primerApellido + ' ' + segundoApellido}"
            >
              Nombre completo
            </h4>
            <p class="font-weight-light text-muted mb-0" th:text="${username}">
              username
            </p>
          </div>
        </div>
      </div>

      <!--Area del menú -->
      <!--MENU LATERAL DEL NAV  -->
      <p class="text-gray font-weight-bold text-uppercase px-3 small pb-4 mb-0">
        Usuario
      </p>

      <ul class="nav flex-column bg-white mb-0">
        <!-- Mi Perfil - Visible para TODOS -->
        <li class="nav-item">
          <a th:href="@{/home}" class="nav-link text-dark font-italic bg-light">
            <i class="fa fa-th-large mr-3 text-primary fa-fw"></i>
            Mi Perfil
          </a>
        </li>

        <!-- Nuevo usuario - Solo ADMIN -->
        <li class="nav-item" sec:authorize="hasRole('admin')">
          <a th:href="@{/usuarios/nuevo}" class="nav-link text-dark font-italic">
            <i class="fa fa-th-large mr-3 text-primary fa-fw"></i>
            Nuevo usuario
          </a>
        </li>

        <!-- Nuevo rol - Solo ADMIN -->
        <li class="nav-item" sec:authorize="hasRole('admin')">
          <a th:href="@{/roles/nuevo}" class="nav-link text-dark font-italic">
            <i class="fa fa-th-large mr-3 text-primary fa-fw"></i>
            Nuevo rol
          </a>
        </li>

        <!-- Listar usuarios - Solo ADMIN -->
        <li class="nav-item" sec:authorize="hasRole('admin')">
          <a th:href="@{/usuarios/listar}" class="nav-link text-dark font-italic">
            <i class="fa fa-th-large mr-3 text-primary fa-fw"></i>
            Listar usuarios
          </a>
        </li>

        <!-- Listar roles - Solo ADMIN -->
        <li class="nav-item" sec:authorize="hasRole('admin')">
          <a th:href="@{/roles/listar}" class="nav-link text-dark font-italic">
            <i class="fa fa-th-large mr-3 text-primary fa-fw"></i>
            Listar roles
          </a>
        </li>

        <!-- Salir - Visible para TODOS -->
        <li class="nav-item">
          <a th:href="@{/logout}" class="nav-link text-dark font-italic">
            <i class="fa fa-th-large mr-3 text-primary fa-fw"></i>
            Salir
          </a>
        </li>
      </ul>
      <br />
      <p class="text-gray font-weight-bold text-uppercase px-3 small pb-4 mb-0">
        Repositorio
      </p>

      <ul class="nav flex-column bg-white mb-0">
        <!-- Nueva película - Solo ADMIN y COMMERCIAL -->
        <li class="nav-item" sec:authorize="hasAnyRole('admin', 'commercial')">
          <a
            th:href="@{/peliculas/nueva}"
            class="nav-link text-dark font-italic"
          >
            <i class="fa fa-th-large mr-3 text-primary fa-fw"></i>
            Nueva película
          </a>
        </li>

        <!-- Listar películas - Visible para TODOS -->
        <li class="nav-item">
          <a
            id="IdListarPeliculas"
            th:href="@{/peliculas/listar}"
            class="nav-link text-dark font-italic"
          >
            <i class="fa fa-address-card mr-3 text-primary fa-fw"></i>
            Listar películas
          </a>
        </li>
      </ul>
    </div>

    <!--Area del home page -->

    <!-- Page content holder -->
    <div class="page-content p-5" id="content">
      <!-- Toggle button -->
      <button
        id="sidebarCollapse"
        type="button"
        class="btn btn-light bg-white rounded-pill shadow-sm px-4 mb-4"
      >
        <i class="fa fa-bars mr-2"></i
        ><small class="text-uppercase font-weight-bold"></small>
      </button>

      <!--MENU DEL PERFIL  -->

      <!-- Capa seccion01 donde se cargarán las secciones-->
      <div id="seccion01">
        <h2 class="display-4 text-white"><b>Mi Perfil</b></h2>
        <p class="lead text-white mb-0">
          <b>Nombre:</b> <span th:text="${nombre}">nombre</span>
        </p>
        <p class="lead text-white mb-0">
          <b>Apellidos:</b>
          <span th:text="${primerApellido + ' ' + segundoApellido}"
            >apellidos</span
          >
        </p>
        <p class="lead text-white mb-0">
          <b>Nombre de usuario:</b> <span th:text="${username}">username</span>
        </p>
        <p class="lead text-white mb-0">
          <b>Roles:</b> <span th:text="${roles}">roles de usuario</span>
        </p>
        <br />
        <p class="lead text-white">
          <a th:href="@{/logout}" class="text-white"> <u>Salir</u></a>
        </p>
        <!-- <div class="separator"></div> -->
      </div>
    </div>
    <!-- End demo content -->

    <!-- Ventana Modal en bootstrap para añadir Nueva Pelicula -->
    <div
      class="modal fade"
      id="NuevaPeliculaCenter"
      tabindex="-1"
      role="dialog"
      aria-labelledby="NuevaPeliculaCenterTitle"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-dialog-centered modal-lg"
        role="document"
        style="max-width: 800px"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="NuevaPeliculaLongTitle">
              Nueva película
            </h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- Aquí podrías generar el código html para representar el formulario-->
            [Formulario de recogida de datos]
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Cerrar
            </button>
            <button id="GuardarPelicula" type="button" class="btn btn-dark">
              Guardar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Ventana Modal en bootstrap para listar las Pelicula -->
    <div
      class="modal fade"
      id="ListarPeliculasVisual"
      tabindex="-1"
      role="dialog"
      aria-labelledby="ListarPeliculasVisualTitle"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-dialog-centered modal-lg"
        role="document"
        style="max-width: 800px"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="NuevaPeliculaLongTitle">
              Lista de peliculas
            </h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- Aquí podría generarse el código html para representar la tabla-->
            <div id="htmlListaPeliculas">[Listado de películas]</div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Cerrar
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
